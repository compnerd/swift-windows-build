<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:bal="http://schemas.microsoft.com/wix/BalExtension">
  <?if $(var.TENSORFLOW) = true ?>
    <?define Title = "Swift for TensorFlow" ?>
    <?define Logo = "Resources/TensorFlow.png" ?>
  <?else?>
    <?define Title = "Swift" ?>
    <?define Logo = "Resources/Swift.png" ?>
  <?endif?>

  <Bundle Name="$(var.Title)"
          Version="0.0.0.0"
          Manufacturer="dt.compnerd.org"
          UpgradeCode="d280bb3c-01ab-4385-b70b-bcaa88f520f8">
    <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.HyperlinkLicense">
      <bal:WixStandardBootstrapperApplication
        LicenseUrl=""
        LogoFile="$(var.Logo)"
        SuppressOptionsUI="no"
        SuppressRepair="yes" />
    </BootstrapperApplicationRef>

    <Variable
      Name="INSTALLDIR"
      Type="string"
      Value="[WindowsVolume]"
      bal:Overridable="yes" />

    <Chain>
      <MsiPackage SourceFile="$(var.MSI_LOCATION)\toolchain.msi" Compressed="yes">
        <MsiProperty Name="INSTALL_DEBUGINFO" Value="[INSTALL_DEBUGINFO]" />
        <MsiProperty Name="INSTALLDIR" Value="[INSTALLDIR]" />
      </MsiPackage>
      <MsiPackage SourceFile="$(var.MSI_LOCATION)\sdk.msi" Compressed="yes">
        <MsiProperty Name="INSTALLDIR" Value="[INSTALLDIR]" />
      </MsiPackage>
      <MsiPackage SourceFile="$(var.MSI_LOCATION)\runtime.msi" Compressed="yes">
        <MsiProperty Name="INSTALLDIR" Value="[INSTALLDIR]" />
      </MsiPackage>
      <MsiPackage SourceFile="$(var.MSI_LOCATION)\icu.msi" Compressed="yes">
        <MsiProperty Name="INSTALLDIR" Value="[INSTALLDIR]" />
      </MsiPackage>
      <?if $(var.DEVTOOLS) = true ?>
        <MsiPackage SourceFile="$(var.MSI_LOCATION)\devtools.msi" Compressed="yes">
          <MsiProperty Name="INSTALLDIR" Value="[INSTALLDIR]" />
        </MsiPackage>
      <?endif?>
      <?if $(var.TENSORFLOW) = true ?>
        <MsiPackage SourceFile="$(var.MSI_LOCATION)\tensorflow.msi" Compressed="yes">
          <MsiProperty Name="INSTALLDIR" Value="[INSTALLDIR]" />
        </MsiPackage>
      <?endif?>
    </Chain>
  </Bundle>
</Wix>
